!function(t,n,e){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e[t]=n()}("SlsRoute",function(){function t(t,n){if(n){var e=new Error(t);console.error(e)}else this.config.debug&&console.log(t)}function n(t){var n={};if(-1!=t.indexOf("&"))for(var e=t.split("&"),i=e.length,o=0;i>o;o++){var r=e[o].split("=");n[r[0]]=r[1]}else if(-1!=t.indexOf("=")){var r=t.split("=");n[r[0]]=r[1]}else for(var e=t.split("/"),o=0;o<e.length;o++){var s,h;o%2===0&&(s=e[o]),o%2===1&&(h=e[o]),n[s]=h}return n}function e(e){var i=this.config,o="",r={};if(e)if(-1!=e.indexOf(i.hash)){var s=i.hash.length,h=e.length,u=e.length,a=e.indexOf("?");if(-1!=a){var h=a,c=e.substring(a+1,u);r=n(c)}o=e.substring(s,h)}else t("请确保使用的hash定界符和配置的一致。",!0);return{action:o,query:r}}function i(){var t=this.config,n=window.location.href,e="",i=n.indexOf(t.hash);if(-1==i)return!1;var e=n.substring(i),n=n.substring(0,i);return{url:n,hash:e}}function o(){for(var t=i.call(this),n=e.call(this,t.hash),o=this.routes.length,r=!1,s=0;o>s;s++){if(this.config.blur&&0==n.action.indexOf(this.routes[s]+"/")){this.changeRouteFn&&this.changeRouteFn.call(this,n),r=!0;break}if(this.routes[s]===n.action){this.changeRouteFn&&this.changeRouteFn.call(this,n),r=!0;break}}r||this.defaultRouteFn&&this.defaultRouteFn.call(this)}var r=function(n){if(n.constructor===Object){if(Array.isArray(n.routes)===!1)return t("参数对象必须包含route属性，且值为数组。",!0),this;this.config={debug:!0,blur:!1,hash:"#",activeClass:"sls-route-active",startParam:"?",param:"&",keyValueSplit:"="},this.routes=n.routes,void 0!=n.defaultRouteFn&&n.defaultRouteFn.constructor===Function&&(this.defaultRouteFn=n.defaultRouteFn),void 0!=n.changeRouteFn&&n.changeRouteFn.constructor===Function&&(this.changeRouteFn=n.changeRouteFn),this.config.blur=void 0!=n.blur&&n.blur.constructor===Boolean?n.blur:!1,this.config.debug=void 0!=n.debug&&n.debug.constructor===Boolean?n.debug:!1,this.config.hash=void 0!=n.hash&&n.hash.constructor===String?n.hash:"#",this.check()}else t("实例化时参数必须为对象。",!0)};return r.prototype={constructor:r,version:"1.0.0",check:function(){var t=this;return o.call(t),window.addEventListener("hashchange",o.bind(t)),this},go:function(t,n){var e=(i.call(this),"");t&&"string"==typeof t&&(e=this.config.hash+t);var o="";if(n&&"object"==typeof n){var r=[];for(var s in n)r.push(s+"="+n[s]);o="?"+r.join("&")}window.location.hash=e+o},redirect:function(t,n){this.go(t,n)}},r},this);